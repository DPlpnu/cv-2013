# -*- coding: utf-8 -*-
"""cv_lab1_Alchuk.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/12XxWbMWRJnDX-qFFUC9_EXVLFtvCr4jS

Альчук Іван КН-413

Виконати 1D лінійну фільтрацію зображення з різними значеннями K i L. Провести  порівняльний аналіз

Вибрати з інтернету два зображення з різною деталізацією об’єктів та два зображення з різним контрастом.

![image.png](data:image/png;base64,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9tlnt0UhY8K2afbF9txnyaTtzz//fHj77beHN954o9lGfscddxyOPvroRsrRU/fpCKz2kOnllfs3EcjEnFVN1PXyyy83Arj44ovbqm7SvvPOO8P1118/HHnkke1CBrOSNjiZyX/ttdc2h+VgIq6VK1e2+957792qx57cZ+mUv5iMcg7M4W666aZh3333HU488cRhk002aRHEww8/PHz66afDzjvvPOy6667NIRfTuZR2e5lHHnlkQFzaoVvkJbq79dZbG2GuWLGi2QjT1157bXjssceGL7/8crjqqquanXRJs+wif/fddw+nnHLKsM8++7RF4YYbbhiuuOKKYeutt55Zlz4kKQr2LBrtybJVnGiX3cbwvvvuG7777rtG9sY9JJk6dZ+OwNJi6el1K3cJCMRJ3F1WWVGLyb3bbru1CIEaK/0OO+zQHCTbyGnqo0+Zya+Oy9bmoIMOalHdK6+8skZkME3X381DCLY0tjraEM1oG5E+++yzzVl333335vSiyUknVA95kw8e7hxe9Mj5p6X02f31119vpITkkaetoy3kE0880TAQeWWrKvqCy3bbbbcGkejLZKLfAqBP+rbnnns2wjNmomR2S9PqykNAH330URuDyE620f/WlujQwqVtW/7gNq2Nvm49LxxZFAjrHgET0eTlkJ45E0fmTM8880wrEyHIV26bInq58MILm6NxnMnJ2/8OCXD2Sy65pEUfHOG4444bHnjggdYhetXp68lzSX1+y5j4Z7Lcb3W1I6Jgs22hbQ6Hff7559t29cADD2yRIPleh7rqwAQWIRQ42QqKQJA5/X1d9fTTZWvI0ZGEqBXJcH6YsmGrrbZq0RdZeuEIEzotCJP25HfacPaE/M4///zWL+MVez744INGhMhQSt3ARod+vPfee3/2xZj2iUzqeU50pt7JJ588HHHEEQPyj0xft57XRKDIa01M/lVOHMFkf/DBB9thLCfgmKIFEYvV1aouiTpefPHFFrlwHo7D6daWRBrOl55++ukWbR188MEtIrKFoo9zIzjO0TsC25J6R5LXl+V3Xzf1bNcQDQIThekjUnF2Z6soEppWj37k9eSTTzZMEDVC4ey2dzmARxaTSZ8cnt95552NqMjecsstjezpRVy2qvoracfWXDQmmrG1ZeushOyQqm2vLTH8L7jggrbYOLszdsbIuIW8puliCzJ1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)
"""

import numpy as np
import matplotlib.pyplot as plt
from PIL import Image

def linear_1d_filtration(image, k , l):
    image_arr = np.array(image)
    res = []

    if len(image_arr.shape) == 2:
      res = k * image_arr + l
      res[res > 255] = 255
      res[res < 0] = 0
      return Image.fromarray(np.asarray(res).astype(np.uint8))

    for rgb_layer in range(3):
        current_layer = image_arr[:, :, rgb_layer]
        processed_layer = k * current_layer + l
        res.append(processed_layer)
    return Image.fromarray(np.dstack(res).astype(np.uint8))

def pre_process(path):
  return Image.open(path)

def display(initial, test_1, test_2, test_1_params, test_2_params):
  fig, axes = plt.subplots(1, 3, figsize=(50,50))
  axes[0].imshow(initial, cmap='gray')
  axes[0].set_title('Initial image')

  axes[1].imshow(test_1, cmap='gray')
  axes[1].set_title(f'After 1D filter K = {test_1_params[0]} and L = {test_1_params[1]}')

  axes[2].imshow(test_2, cmap='gray')
  axes[2].set_title(f'After 1D filter K = {test_2_params[0]} and L = {test_2_params[1]}')
  fig.set_figwidth(50)
  fig.set_figheight(30)

  plt.show()

# high detailed
initial = pre_process('/content/high_detailed.jpg')
test_1_params = (0.6,0.8)
test_2_params = (0.7,40);
test_1  = linear_1d_filtration(initial,test_1_params[0], test_1_params[1])
test_2  = linear_1d_filtration(initial, test_2_params[0], test_2_params[1])
display(initial, test_1, test_2, test_1_params, test_2_params)

#low detailed
initial = pre_process('/content/low_detailed.jpg')
test_1_params = (0.6,0.8)
test_2_params = (0.6,40);
test_1  = linear_1d_filtration(initial,test_1_params[0], test_1_params[1])
test_2  = linear_1d_filtration(initial, test_2_params[0], test_2_params[1])
display(initial, test_1, test_2, test_1_params, test_2_params)

#low contrast
initial = pre_process('/content/low_contrast.jpg')
test_1_params = (0.1,0)
test_2_params = (1,100);
test_1  = linear_1d_filtration(initial,test_1_params[0], test_1_params[1])
test_2  = linear_1d_filtration(initial, test_2_params[0], test_2_params[1])
display(initial, test_1, test_2, test_1_params, test_2_params)

#high contrast
initial = pre_process('/content/high_contrast.jpeg')
test_1_params = (0.5,1)
test_2_params = (1, 200);
test_1  = linear_1d_filtration(initial,test_1_params[0], test_1_params[1])
test_2  = linear_1d_filtration(initial, test_2_params[0], test_2_params[1])
display(initial, test_1, test_2, test_1_params, test_2_params)
